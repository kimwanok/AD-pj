<!DOCTYPE html>
<html>

<head>
    <title>투표자 생성하기</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
        crossorigin="anonymous"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>

<body>
    <div class="container">
        <br>
        <h2>투표자 생성하기</h2>
        <br>

            <label for="name" class="form-label">투표자이름:</label>
            <br>
            <input type="text" class="form-control" id="name" name="name" placeholder="appUser">
            <br>
            <label for="agenda" class="form-label">안건:</label>
            <br>
            <input type="text" class="form-control" id="agenda" name="agenda" placeholder="org1.agenda">
            <br>
            <button id="create-btn" class="btn btn-success">투표자 인증서 생성</button>
        <br><br>
        <p class="lead">-- RESULT AREA --</p>

        <div id="result"></div>
    </div>
</body>

<script>
    $('#create-btn').click( function(){
        var name = $('#name').val();
        var department = $('#agenda').val();

        console.log(name, agenda);

        $.post('/voter', {name, agenda}, function(data) {
            // data result => success, fail
            if(data.result == 'success'){ // success 이미지 result에 삽입
                $("#result").empty();
                $("#result").append("<img src='/public/images/ok.png' width='300'>");
            } else { // failed 이미지 result에 삽입
                $("#result").empty();
                $("#result").append("<img src='/public/images/nok.png' width='300'>");
            }
        });
    });
</script>

</html>